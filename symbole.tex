\makeatletter

\usetikzlibrary{arrows}
\usetikzlibrary{scopes}

\pgfdeclareshape{boiler}
{
	\savedanchor{\center}{\pgfpointorigin}
	\savedanchor{\boxsw}{\pgfpoint{-.5cm}{-.5cm}}
	\savedanchor{\boxne}{\pgfpoint{.5cm}{.5cm}}
	\savedanchor{\boxn}{\pgfpoint{0cm}{.5cm}}
	\savedanchor{\ziga}{\pgfpoint{.25cm}{.75cm}}
	\savedanchor{\zigb}{\pgfpoint{-.25cm}{.75cm}}
	\savedanchor{\zigc}{\pgfpoint{0cm}{1cm}}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@x=-.5\wd\pgfnodeparttextbox
		\pgf@y=-.5\ht\pgfnodeparttextbox
	}
	\anchor{s}{\pgfpoint{0cm}{-.5cm}}
	\anchor{n}{\pgfpoint{0cm}{1cm}}

	\backgroundpath{
		\pgfpathrectanglecorners{\boxsw}{\boxne}

		\pgfpathmoveto{\boxn}
		\pgfpathlineto{\ziga}
		\pgfpathlineto{\zigb}
		\pgfpathlineto{\zigc}
		\pgfusepath{stroke}
	}
}

\pgfdeclareshape{turbine}
{
	\savedanchor{\center}{\pgfpointorigin}
	\savedanchor{\sw}{\pgfpoint{-.75cm}{-.33cm}}
	\savedanchor{\nw}{\pgfpoint{-.75cm}{.33cm}}
	\savedanchor{\se}{\pgfpoint{.75cm}{-.75cm}}
	\savedanchor{\ne}{\pgfpoint{.75cm}{.75cm}}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@x=-.5\wd\pgfnodeparttextbox
		\pgf@y=-.5\ht\pgfnodeparttextbox
	}
	\anchor{nw}{\nw}
	\anchor{se}{\se}
	\anchor{sw}{\sw}

	\backgroundpath{
		\pgfpathmoveto{\nw}
		\pgfpathlineto{\ne}
		\pgfpathlineto{\se}
		\pgfpathlineto{\sw}
		\pgfpathclose
		\pgfusepath{stroke}
	}
}

\pgfdeclareshape{condenser}
{
	\savedanchor{\center}{\pgfpointorigin}
	\savedanchor{\s}{\pgfpoint{0cm}{-.5cm}}
	\savedanchor{\n}{\pgfpoint{0cm}{.5cm}}
	\savedanchor{\ne}{\pgfpoint{.75cm}{.35cm}}
	\savedanchor{\se}{\pgfpoint{.75cm}{-.35cm}}
	\savedanchor{\nx}{\pgfpoint{.25cm}{.35cm}}
	\savedanchor{\sx}{\pgfpoint{.25cm}{-.35cm}}
	\savedanchor{\mnx}{\pgfpoint{-.25cm}{.175cm}}
	\savedanchor{\msx}{\pgfpoint{-.25cm}{-.175cm}}
	\savedanchor{\mx}{\pgfpoint{.25cm}{0cm}}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@x=.66cm
		\pgf@y=-.5\ht\pgfnodeparttextbox
	}
	\anchor{n}{\n}
	\anchor{s}{\s}
	\anchor{ne}{\ne}
	\anchor{se}{\se}

	\backgroundpath{
		\pgfpathcircle{\center}{.5cm}

		\pgfpathmoveto{\ne}
		\pgfpathlineto{\nx}
		\pgfpathlineto{\mnx}
		\pgfpathlineto{\mx}
		\pgfpathlineto{\msx}
		\pgfpathlineto{\sx}
		\pgfpathlineto{\se}
		\pgfusepath{stroke}
	}
}

\pgfdeclareshape{pump}
{
	\savedanchor{\center}{\pgfpointorigin}
	\savedanchor{\w}{\pgfpoint{-.33cm}{0cm}}
	\savedanchor{\e}{\pgfpoint{.33cm}{0cm}}
	\savedanchor{\arrw}{\pgfpoint{-.25cm}{0cm}}
	\savedanchor{\arre}{\pgfpoint{.25cm}{0cm}}
	\savedanchor{\arrne}{\pgfpoint{.1cm}{.066cm}}
	\savedanchor{\arrse}{\pgfpoint{.1cm}{-.066cm}}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@x=-.5\wd\pgfnodeparttextbox
		\pgf@y=.15cm
		\advance \pgf@y by \ht\pgfnodeparttextbox
	}
	\anchor{w}{\w}
	\anchor{e}{\e}

	\backgroundpath{
		\pgfpathcircle{\center}{.33cm}

		\pgfpathmoveto{\arrw}
		\pgfpathlineto{\arre}
		\pgfusepath{stroke}

		\pgfpathmoveto{\arre}
		\pgfpathlineto{\arrne}
		\pgfpathlineto{\arrse}
		\pgfpathclose
		\pgfusepath{fill}
	}
}

\pgfdeclareshape{pumpl}
{
	\savedanchor{\center}{\pgfpointorigin}
	\savedanchor{\w}{\pgfpoint{-.33cm}{0cm}}
	\savedanchor{\e}{\pgfpoint{.33cm}{0cm}}
	\savedanchor{\arrw}{\pgfpoint{-.25cm}{0cm}}
	\savedanchor{\arre}{\pgfpoint{.25cm}{0cm}}
	\savedanchor{\arrnw}{\pgfpoint{-.1cm}{.066cm}}
	\savedanchor{\arrsw}{\pgfpoint{-.1cm}{-.066cm}}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@x=-.5\wd\pgfnodeparttextbox
		\pgf@y=.15cm
		\advance \pgf@y by \ht\pgfnodeparttextbox
	}
	\anchor{e}{\e}
	\anchor{w}{\w}

	\backgroundpath{
		\pgfpathcircle{\center}{.33cm}

		\pgfpathmoveto{\arre}
		\pgfpathlineto{\arrw}
		\pgfusepath{stroke}

		\pgfpathmoveto{\arrw}
		\pgfpathlineto{\arrnw}
		\pgfpathlineto{\arrsw}
		\pgfpathclose
		\pgfusepath{fill}
	}
}

\pgfdeclareshape{heatxchg}
{
	\savedanchor{\center}{\pgfpointorigin}
	\savedanchor{\sw}{\pgfpoint{-.5cm}{-.5cm}}
	\savedanchor{\ne}{\pgfpoint{.5cm}{.5cm}}

	\savedanchor{\w}{\pgfpoint{-.5cm}{0cm}}
	\savedanchor{\e}{\pgfpoint{.5cm}{0cm}}
	\savedanchor{\zw}{\pgfpoint{-.3cm}{0cm}}
	\savedanchor{\ze}{\pgfpoint{.3cm}{0cm}}
	\savedanchor{\zn}{\pgfpoint{0cm}{.4cm}}
	\savedanchor{\zs}{\pgfpoint{0cm}{-.4cm}}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@x=.45cm
		\pgf@y=.4cm
		\advance \pgf@x by -\wd\pgfnodeparttextbox
		\advance \pgf@y by -\ht\pgfnodeparttextbox
	}
	\anchor{e}{\e}
	\anchor{w}{\w}
	\anchor{n}{\pgfpoint{0cm}{.5cm}}
	\anchor{s}{\pgfpoint{0cm}{-.5cm}}

	\backgroundpath{
		\pgfpathrectanglecorners{\sw}{\ne}

		\pgfpathmoveto{\e}
		\pgfpathlineto{\ze}
		\pgfpathlineto{\zs}
		\pgfpathlineto{\zn}
		\pgfpathlineto{\zw}
		\pgfpathlineto{\w}
		\pgfusepath{stroke}
	}
}

\pgfdeclareshape{heatnode}
{
	\savedanchor{\center}{\pgfpointorigin}

	\anchor{center}{\center}

	\backgroundpath{
		\pgfpathcircle{\center}{.5mm}
		\pgfusepath{fill}
	}
}

\makeatother
