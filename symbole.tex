\makeatletter

\usetikzlibrary{arrows}
\usetikzlibrary{scopes}

\pgfdeclareshape{boiler}
{
	\savedanchor{\center}{\pgfpointorigin}
	\savedanchor{\boxsw}{\pgfpoint{-.5cm}{-.5cm}}
	\savedanchor{\boxne}{\pgfpoint{.5cm}{.5cm}}
	\savedanchor{\boxn}{\pgfpoint{0cm}{.5cm}}
	\savedanchor{\ziga}{\pgfpoint{.25cm}{.75cm}}
	\savedanchor{\zigb}{\pgfpoint{-.25cm}{.75cm}}
	\savedanchor{\zigc}{\pgfpoint{0cm}{1cm}}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@x=-.5\wd\pgfnodeparttextbox
		\pgf@y=-.5\ht\pgfnodeparttextbox
	}
	\anchor{s}{\pgfpoint{0cm}{-.5cm}}
	\anchor{n}{\pgfpoint{0cm}{1cm}}
	\anchor{w}{\pgfpoint{-.5cm}{0cm}}

	\backgroundpath{
		\pgfpathrectanglecorners{\boxsw}{\boxne}

		\pgfpathmoveto{\boxn}
		\pgfpathlineto{\ziga}
		\pgfpathlineto{\zigb}
		\pgfpathlineto{\zigc}
		\pgfusepath{stroke}
	}
}

\pgfdeclareshape{reheater}
{
	\savedanchor{\center}{\pgfpointorigin}
	\savedanchor{\boxs}{\pgfpoint{0cm}{-.5cm}}
	\savedanchor{\boxn}{\pgfpoint{0cm}{.5cm}}
	\savedanchor{\ziga}{\pgfpoint{.25cm}{.75cm}}
	\savedanchor{\zigb}{\pgfpoint{-.25cm}{.75cm}}
	\savedanchor{\zigc}{\pgfpoint{0cm}{1cm}}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@x=.5\wd\pgfnodeparttextbox
		\pgf@y=-.5\ht\pgfnodeparttextbox
	}
	\anchor{s}{\boxn}
	\anchor{n}{\zigc}
	\anchor{w}{\zigb}

	\backgroundpath{
		\pgfpathmoveto{\boxn}
		\pgfpathlineto{\ziga}
		\pgfpathlineto{\zigb}
		\pgfpathlineto{\zigc}
		\pgfusepath{stroke}
	}
}

\pgfdeclareshape{turbine}
{
	\savedanchor{\center}{\pgfpointorigin}
	\savedanchor{\sw}{\pgfpoint{-.75cm}{-.33cm}}
	\savedanchor{\nw}{\pgfpoint{-.75cm}{.33cm}}
	\savedanchor{\se}{\pgfpoint{.75cm}{-.75cm}}
	\savedanchor{\ne}{\pgfpoint{.75cm}{.75cm}}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@x=-.5\wd\pgfnodeparttextbox
		\pgf@y=-.5\ht\pgfnodeparttextbox
	}
	\anchor{nw}{\nw}
	\anchor{ne}{\ne}
	\anchor{se}{\se}
	\anchor{sw}{\sw}
	\anchor{w}{\pgfpoint{-.75cm}{0cm}}
	\anchor{e}{\pgfpoint{.75cm}{0cm}}

	\backgroundpath{
		\pgfpathmoveto{\nw}
		\pgfpathlineto{\ne}
		\pgfpathlineto{\se}
		\pgfpathlineto{\sw}
		\pgfpathclose
		\pgfusepath{stroke}
	}
}

\pgfdeclareshape{condenser}
{
	\savedanchor{\center}{\pgfpointorigin}
	\savedanchor{\s}{\pgfpoint{0cm}{-.5cm}}
	\savedanchor{\n}{\pgfpoint{0cm}{.5cm}}
	\savedanchor{\ne}{\pgfpoint{.75cm}{.35cm}}
	\savedanchor{\se}{\pgfpoint{.75cm}{-.35cm}}
	\savedanchor{\nx}{\pgfpoint{.25cm}{.35cm}}
	\savedanchor{\sx}{\pgfpoint{.25cm}{-.35cm}}
	\savedanchor{\mnx}{\pgfpoint{-.25cm}{.175cm}}
	\savedanchor{\msx}{\pgfpoint{-.25cm}{-.175cm}}
	\savedanchor{\mx}{\pgfpoint{.25cm}{0cm}}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@x=.66cm
		\pgf@y=-.5\ht\pgfnodeparttextbox
	}
	\anchor{n}{\n}
	\anchor{s}{\s}
	\anchor{ne}{\ne}
	\anchor{se}{\se}
	\anchor{nw}{\pgfpoint{-.3536cm}{.3536cm}}
	\anchor{sw}{\pgfpoint{-.3536cm}{-.3536cm}}

	\backgroundpath{
		\pgfpathcircle{\center}{.5cm}

		\pgfpathmoveto{\ne}
		\pgfpathlineto{\nx}
		\pgfpathlineto{\mnx}
		\pgfpathlineto{\mx}
		\pgfpathlineto{\msx}
		\pgfpathlineto{\sx}
		\pgfpathlineto{\se}
		\pgfusepath{stroke}
	}
}

\pgfdeclareshape{pump}
{
	\savedanchor{\center}{\pgfpointorigin}
	\savedanchor{\w}{\pgfpoint{-.33cm}{0cm}}
	\savedanchor{\e}{\pgfpoint{.33cm}{0cm}}
	\savedanchor{\arrw}{\pgfpoint{-.25cm}{0cm}}
	\savedanchor{\arre}{\pgfpoint{.25cm}{0cm}}
	\savedanchor{\arrne}{\pgfpoint{.1cm}{.066cm}}
	\savedanchor{\arrse}{\pgfpoint{.1cm}{-.066cm}}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@x=-.5\wd\pgfnodeparttextbox
		\pgf@y=.25cm
		\advance \pgf@y by \ht\pgfnodeparttextbox
	}
	\anchor{w}{\w}
	\anchor{e}{\e}
	\anchor{n}{\pgfpoint{0cm}{.33cm}}
	\anchor{s}{\pgfpoint{0cm}{-.33cm}}
	\anchor{sw}{\pgfpoint{-0.233cm}{-0.233cm}}

	\backgroundpath{
		\pgfpathcircle{\center}{.33cm}

		\pgfpathmoveto{\arrw}
		\pgfpathlineto{\arre}
		\pgfusepath{stroke}

		\pgfpathmoveto{\arre}
		\pgfpathlineto{\arrne}
		\pgfpathlineto{\arrse}
		\pgfpathclose
		\pgfusepath{fill}
	}
}

\pgfdeclareshape{pumpl}
{
	\savedanchor{\center}{\pgfpointorigin}
	\savedanchor{\w}{\pgfpoint{-.33cm}{0cm}}
	\savedanchor{\e}{\pgfpoint{.33cm}{0cm}}
	\savedanchor{\arrw}{\pgfpoint{-.25cm}{0cm}}
	\savedanchor{\arre}{\pgfpoint{.25cm}{0cm}}
	\savedanchor{\arrnw}{\pgfpoint{-.1cm}{.066cm}}
	\savedanchor{\arrsw}{\pgfpoint{-.1cm}{-.066cm}}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@x=-.5\wd\pgfnodeparttextbox
		\pgf@y=.25cm
		\advance \pgf@y by \ht\pgfnodeparttextbox
	}
	\anchor{e}{\e}
	\anchor{w}{\w}
	\anchor{n}{\pgfpoint{0cm}{.33cm}}
	\anchor{s}{\pgfpoint{0cm}{-.33cm}}

	\backgroundpath{
		\pgfpathcircle{\center}{.33cm}

		\pgfpathmoveto{\arre}
		\pgfpathlineto{\arrw}
		\pgfusepath{stroke}

		\pgfpathmoveto{\arrw}
		\pgfpathlineto{\arrnw}
		\pgfpathlineto{\arrsw}
		\pgfpathclose
		\pgfusepath{fill}
	}
}

\pgfdeclareshape{pumpd}
{
	\savedanchor{\center}{\pgfpointorigin}
	\savedanchor{\s}{\pgfpoint{0cm}{-.33cm}}
	\savedanchor{\n}{\pgfpoint{0cm}{.33cm}}
	\savedanchor{\arrs}{\pgfpoint{0cm}{-.25cm}}
	\savedanchor{\arrn}{\pgfpoint{0cm}{.25cm}}
	\savedanchor{\arrse}{\pgfpoint{.066cm}{-.1cm}}
	\savedanchor{\arrsw}{\pgfpoint{-.066cm}{-.1cm}}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@y=-.5\wd\pgfnodeparttextbox
		\pgf@x=.25cm
		\advance \pgf@x by \ht\pgfnodeparttextbox
	}
	\anchor{n}{\n}
	\anchor{s}{\s}
	\anchor{e}{\pgfpoint{.33cm}{0cm}}
	\anchor{w}{\pgfpoint{-.33cm}{0cm}}

	\backgroundpath{
		\pgfpathcircle{\center}{.33cm}

		\pgfpathmoveto{\arrn}
		\pgfpathlineto{\arrs}
		\pgfusepath{stroke}

		\pgfpathmoveto{\arrs}
		\pgfpathlineto{\arrsw}
		\pgfpathlineto{\arrse}
		\pgfpathclose
		\pgfusepath{fill}
	}
}

\pgfdeclareshape{heatxchg}
{
	\savedanchor{\center}{\pgfpointorigin}
	\savedanchor{\sw}{\pgfpoint{-.5cm}{-.5cm}}
	\savedanchor{\ne}{\pgfpoint{.5cm}{.5cm}}

	\savedanchor{\w}{\pgfpoint{-.5cm}{0cm}}
	\savedanchor{\e}{\pgfpoint{.5cm}{0cm}}
	\savedanchor{\zw}{\pgfpoint{-.3cm}{0cm}}
	\savedanchor{\ze}{\pgfpoint{.3cm}{0cm}}
	\savedanchor{\zn}{\pgfpoint{0cm}{.4cm}}
	\savedanchor{\zs}{\pgfpoint{0cm}{-.4cm}}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@x=.45cm
		\pgf@y=.4cm
		\advance \pgf@x by -\wd\pgfnodeparttextbox
		\advance \pgf@y by -\ht\pgfnodeparttextbox
	}
	\anchor{e}{\e}
	\anchor{w}{\w}
	\anchor{n}{\pgfpoint{0cm}{.5cm}}
	\anchor{s}{\pgfpoint{0cm}{-.5cm}}
	\anchor{sw}{\pgfpoint{-.3cm}{-.5cm}}
	\anchor{se}{\pgfpoint{.3cm}{-.5cm}}

	\backgroundpath{
		\pgfpathrectanglecorners{\sw}{\ne}

		\pgfpathmoveto{\e}
		\pgfpathlineto{\ze}
		\pgfpathlineto{\zs}
		\pgfpathlineto{\zn}
		\pgfpathlineto{\zw}
		\pgfpathlineto{\w}
		\pgfusepath{stroke}
	}
}

\pgfdeclareshape{deaerator}
{
	\savedanchor{\center}{\pgfpointorigin}

	\savedanchor{\nw}{\pgfpoint{-.5cm}{.25cm}}
	\savedanchor{\se}{\pgfpoint{.5cm}{-.25cm}}
	\savedanchor{\nec}{\pgfpoint{.25cm}{.25cm}}
	\savedanchor{\nwc}{\pgfpoint{-.25cm}{.25cm}}
	\savedanchor{\net}{\pgfpoint{.25cm}{.5cm}}
	\savedanchor{\nwt}{\pgfpoint{-.25cm}{.5cm}}

	\anchor{w}{\pgfpoint{-.5cm}{0cm}}
	\anchor{e}{\pgfpoint{.5cm}{0cm}}
	\anchor{n}{\pgfpoint{0cm}{.75cm}}
	\anchor{s}{\pgfpoint{0cm}{-.25cm}}
	\anchor{nw}{\pgfpoint{-.25cm}{.425cm}}
	\anchor{ne}{\pgfpoint{.25cm}{.425cm}}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@x=-.5\wd\pgfnodeparttextbox
		\pgf@y=-.5\ht\pgfnodeparttextbox
	}

	\backgroundpath{
		\pgfpathmoveto{\nwt}
		\pgfpathlineto{\nwc}
		\pgfpathlineto{\nw}
		\pgfpatharc{-90}{90}{-.25cm}
		\pgfpathlineto{\se}
		\pgfpatharc{-90}{90}{.25cm}
		\pgfpathlineto{\nec}
		\pgfpathlineto{\net}
		\pgfpatharc{0}{180}{.25cm}
		\pgfusepath{stroke}
	}
}

\pgfdeclareshape{heatnode}
{
	\savedanchor{\center}{\pgfpointorigin}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@x=-.5\wd\pgfnodeparttextbox
		\pgf@y=.05cm
		\advance \pgf@y by \ht\pgfnodeparttextbox
	}
	\anchor{w}{\pgfpoint{-.5mm}{0mm}}
	\anchor{e}{\pgfpoint{.5mm}{0mm}}
	\anchor{n}{\pgfpoint{0mm}{.5mm}}
	\anchor{s}{\pgfpoint{0mm}{-.5mm}}

	\backgroundpath{
		\pgfpathcircle{\center}{.5mm}
		\pgfusepath{fill}
	}
}

\pgfdeclareshape{sumnode}
{
	\savedanchor{\center}{\pgfpointorigin}
	\savedanchor{\nw}{\pgfpoint{-.177cm}{.177cm}}
	\savedanchor{\ne}{\pgfpoint{.177cm}{.177cm}}
	\savedanchor{\se}{\pgfpoint{.177cm}{-.177cm}}
	\savedanchor{\sw}{\pgfpoint{-.177cm}{-.177cm}}

	\anchor{center}{\center}
	\anchor{n}{\pgfpoint{0cm}{.25cm}}
	\anchor{s}{\pgfpoint{0cm}{-.25cm}}
	\anchor{w}{\pgfpoint{-.25cm}{0cm}}
	\anchor{e}{\pgfpoint{.25cm}{0cm}}

	\backgroundpath{
		\pgfpathcircle{\center}{.25cm}

		\pgfpathmoveto{\nw}
		\pgfpathlineto{\se}
		\pgfpathmoveto{\sw}
		\pgfpathlineto{\ne}
		\pgfusepath{stroke}
	}
}

\pgfdeclareshape{gen}
{
	\savedanchor{\center}{\pgfpointorigin}
	\savedanchor{\w}{\pgfpoint{-.33cm}{0cm}}
	\savedanchor{\e}{\pgfpoint{.33cm}{0cm}}
	\savedanchor{\n}{\pgfpoint{0cm}{.33cm}}
	\savedanchor{\nn}{\pgfpoint{0cm}{1cm}}
	\savedanchor{\Ra}{\pgfpoint{-.08cm}{.55cm}}
	\savedanchor{\Rb}{\pgfpoint{.08cm}{.7cm}}
	\savedanchor{\Sa}{\pgfpoint{-.08cm}{.65cm}}
	\savedanchor{\Sb}{\pgfpoint{.08cm}{.8cm}}
	\savedanchor{\Ta}{\pgfpoint{-.08cm}{.75cm}}
	\savedanchor{\Tb}{\pgfpoint{.08cm}{.9cm}}

	\anchor{center}{\center}
	\anchor{text}{
		\pgf@x=-.5\wd\pgfnodeparttextbox
		\pgf@y=-.5\ht\pgfnodeparttextbox
	}
	\anchor{w}{\w}
	\anchor{e}{\e}
	\anchor{n}{\nn}
	\anchor{s}{\pgfpoint{0cm}{-.33cm}}

	\backgroundpath{
		\pgfpathcircle{\center}{.33cm}

		\pgfpathmoveto{\n}
		\pgfpathlineto{\nn}

		\pgfpathmoveto{\Ra}
		\pgfpathlineto{\Rb}
		\pgfpathmoveto{\Sa}
		\pgfpathlineto{\Sb}
		\pgfpathmoveto{\Ta}
		\pgfpathlineto{\Tb}
		\pgfusepath{stroke}
	}
}

\makeatother
